---
title: 最小demo
date: 2026-02-04 17:08:33
permalink: /pages/d921ef/
categories:
  - 提示词工程
  - 提示词工程
tags:
  - 
---
```python
import openai # 假设已安装并配置好环境

# 1. 初始化对话记忆 (第8章：Chatbot 核心)
context = [
    {'role': 'system', 'content': """
    你是一个电商平台的智能售后助理。
    你的任务是：
    1. 保持礼貌和专业。
    2. 在对话结束时，能够根据之前的记录推断用户情绪并生成回复。
    """}
]

# 2. 模拟多轮对话输入 (第8章：上下文管理)
user_messages = [
    "你好，我上周买的那个蓝色的台灯，灯泡碎了，我很失望。",
    "包裹寄过来的时候包装就破了，你们的物流太暴力了。"
]

for msg in user_messages:
    context.append({'role': 'user', 'content': msg})

# --- Agent 内部逻辑处理开始 ---

# 3. 推断情绪 (第5章：Inferring)
infer_prompt = f"根据以下对话记录，推断用户的情感极性（正面/负面）以及具体的情绪。对话：{context}"
# 假设模型推断出：{"sentiment": "负面", "emotion": "愤怒/沮丧"}

# 4. 概括核心问题 (第4章：Summarizing)
summary_prompt = f"请用一句话总结客户遇到的核心问题：{context}"
# 假设模型概括出：客户收到破损的蓝色台灯，对物流包装不满。

# 5. 扩展生成专业邮件 (第7章：Expanding)
# 设置 Temperature=0 保证稳健 (第7章技术点)
reply_prompt = f"""
基于以下信息写一封售后回复邮件：
- 客户总结：收到破损蓝色台灯
- 情感：负面
- 政策：可以全额退款或补发。
要求：语气诚恳，限制在150字以内（第2章：清晰具体）。
"""

# 6. 转换格式输出 (第6章：Transforming)
final_task = "将上述邮件内容转换成 JSON 格式，键名为 'subject' 和 'body'。"

# --- 处理结束 ---

print("Agent 任务完成：已识别情绪并生成结构化回复数据。")
```

