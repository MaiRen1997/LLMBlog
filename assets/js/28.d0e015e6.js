(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{347:function(t,s,a){"use strict";a.r(s);var n=a(7),r=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"智能体开发流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#智能体开发流程"}},[t._v("#")]),t._v(" 智能体开发流程")]),t._v(" "),s("h3",{attrs:{id:"初始化工具"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#初始化工具"}},[t._v("#")]),t._v(" 初始化工具")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AddInputArgs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("BaseModel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Field"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("description"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"first number"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Field"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("description"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"second number"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@tool")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    description"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"add two numbers"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    args_schema"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("AddInputArgs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    return_direct"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""add two numbers"""')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" b\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("create_calc_tools")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("add"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    \ncalc_tools "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" create_calc_tools"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"初始化大模型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#初始化大模型"}},[t._v("#")]),t._v(" 初始化大模型")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("llm "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ChatOpenAI"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    model"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"qwen-max-latest"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    base_url"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://dashscope.aliyuncs.com/compatible-mode/v1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    api_key"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("SecretStr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sk-xxx"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    temperature"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"创建智能体"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建智能体"}},[t._v("#")]),t._v(" 创建智能体")]),t._v(" "),s("p",[t._v("AgentType类型，具体见后面")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("agent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" initialize_agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    tools"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("calc_tools"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    llm"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("llm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    agent"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("AgentType"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("STRUCTURED_CHAT_ZERO_SHOT_REACT_DESCRIPTION"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    verbose"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"调用智能体"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#调用智能体"}},[t._v("#")]),t._v(" 调用智能体")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("messages "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" chat_prompt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("format_messages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    role"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"计算"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    domain"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"使用工具进行数学计算"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    question"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"100+100=？"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nresp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("invoke"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("messages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("由于打开了verbose调试模式，所以会返回思考过程:")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Entering new AgentExecutor chain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\nThought"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 这是一个简单的加法问题，我可以通过使用"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'add'")]),t._v("函数来解决。\nAction"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n```\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"action"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"add"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"action_input"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"a"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"b"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n```\nObservation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Finished chain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'input'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("ChatMessage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("content"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'你是一位计算专家，擅长回答使用工具进行数学计算领域的问题。'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" additional_kwargs"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" response_metadata"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" role"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'system'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ChatMessage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("content"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'用户问题：100+100=？'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" additional_kwargs"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" response_metadata"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" role"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'user'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'output'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"智能体关键知识点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#智能体关键知识点"}},[t._v("#")]),t._v(" 智能体关键知识点")]),t._v(" "),s("h3",{attrs:{id:"agent-type"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#agent-type"}},[t._v("#")]),t._v(" Agent Type")]),t._v(" "),s("p",[t._v("LangChain提供多种Agent类型，每种类型适用于不同的场景和需求。以下是几种主要Agent类型及其特点：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[s("strong",[t._v("AgentType")])]),t._v(" "),s("th",[s("strong",[t._v("核心机制")])]),t._v(" "),s("th",[s("strong",[t._v("适用场景")])]),t._v(" "),s("th",[s("strong",[t._v("优点")])]),t._v(" "),s("th",[s("strong",[t._v("缺点")])])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("strong",[t._v("ZERO_SHOT_REACTDESCRIPTION")])]),t._v(" "),s("td",[t._v("ReAct + 工具描述")]),t._v(" "),s("td",[t._v("简单任务、工具组合")]),t._v(" "),s("td",[t._v("快速集成、无需训练数据")]),t._v(" "),s("td",[t._v("输出格式自由，可控性较低")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("STRUCTURED_CHAT_ZERO_SHOT_REACT_DESCRIPTION")])]),t._v(" "),s("td",[t._v("结构化输出 + ReAct")]),t._v(" "),s("td",[t._v("结构化工具调用")]),t._v(" "),s("td",[t._v("高可控性、格式严格")]),t._v(" "),s("td",[t._v("依赖工具描述清晰度")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("OPENAI_FUNCTIONS")])]),t._v(" "),s("td",[t._v("OpenAI 函数调用")]),t._v(" "),s("td",[t._v("OpenAI 模型场景")]),t._v(" "),s("td",[t._v("高效、强耦合 OpenAI")]),t._v(" "),s("td",[t._v("仅限 OpenAI 模型")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("CONVERSATIONAL_REACT_DESCRIPTION")])]),t._v(" "),s("td",[t._v("多轮对话 + ReAct")]),t._v(" "),s("td",[t._v("多轮交互任务")]),t._v(" "),s("td",[t._v("上下文感知、灵活性高")]),t._v(" "),s("td",[t._v("需配置记忆模块")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("AUTO_GPT")])]),t._v(" "),s("td",[t._v("自主代理循环")]),t._v(" "),s("td",[t._v("复杂任务自动化")]),t._v(" "),s("td",[t._v("自主决策、长期目标")]),t._v(" "),s("td",[t._v("实验性、稳定性待验证")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("STRUCTURED_CHAT")])]),t._v(" "),s("td",[t._v("严格结构化输出")]),t._v(" "),s("td",[t._v("数据提取、表单填写")]),t._v(" "),s("td",[t._v("格式标准化、可控性强")]),t._v(" "),s("td",[t._v("灵活性低")])])])]),t._v(" "),s("h3",{attrs:{id:"返回体结构化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#返回体结构化"}},[t._v("#")]),t._v(" 返回体结构化")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("agent "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" initialize_agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" AgentType\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" pydantic "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" BaseModel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Field\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain_core"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("output_parsers "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" JsonOutputParser\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Output")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("BaseModel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Field"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"工具的入参"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Field"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"计算的结果"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    think"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Field"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"思考过程"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    \nparser "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" JsonOutputParser"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pydantic_object "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Output"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 通过JsonOutputParser创建格式的实例化对象")]),t._v("\nformat_instructions "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" parser"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_format_instructions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 对参数进行格式化")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("format_instructions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nmessages "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" chat_prompt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("format_messages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    role"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"计算"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    domain"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"使用工具进行数学计算"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    question"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"""\n请阅读下面的问题，并返回一个严格的 JSON 对象，不要使用 Markdown 代码块包裹！\n格式要求：\n')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("format_instructions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('\n\n问题：\n100+100=？\n"""')])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nresp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("invoke"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("messages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"output"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""\n{\n  "result": "200",\n  "args": "100, 100"\n}\n"""')]),t._v("\n")])])]),s("p",[t._v("注意需要设置"),s("code",[t._v("return_direct=False")]),t._v("：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@tool")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    description"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"add two numbers"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    args_schema"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("AddInputArgs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    return_direct"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("False")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""add two numbers"""')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" b\n")])])]),s("h3",{attrs:{id:"langchain内置工具"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#langchain内置工具"}},[t._v("#")]),t._v(" LangChain内置工具")]),t._v(" "),s("p",[t._v("Tool使用方法：https://python.langchain.com/docs/integrations/tools/")]),t._v(" "),s("p",[t._v("内置Tooltiks：https://api.python.langchain.com/en/latest/community/agent_toolkits.html")]),t._v(" "),s("h3",{attrs:{id:"python-repl"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#python-repl"}},[t._v("#")]),t._v(" Python REPL")]),t._v(" "),s("p",[t._v("官网：https://python.langchain.com/docs/integrations/tools/python/")]),t._v(" "),s("h4",{attrs:{id:"利用python-repl开发一个企业官网"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#利用python-repl开发一个企业官网"}},[t._v("#")]),t._v(" 利用Python REPL开发一个企业官网")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("agents "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" initialize_agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" AgentType\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain_core"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prompts "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" PromptTemplate\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" langchain_experimental"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tools"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("python"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tool "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" PythonREPLTool\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("common "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" llm\n\n\ntools "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("PythonREPLTool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\ntool_names "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"PythonREPLTool"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\nagent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" initialize_agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    tools"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("tools"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    llm"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("llm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    agent"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("AgentType"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ZERO_SHOT_REACT_DESCRIPTION"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    verbose"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nprompt_template "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" PromptTemplate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("from_template"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("template"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""尽你所能回答以下问题，你可以使用以下工具：\n{tools}\n--\n请按照以下格式：\n问题：你必须回答的输入问题\n思考：你应该始终考虑该怎么做\n行动：要采取的行动，应该是[{tool_names}]中的一个\n行动输入：行动的输入\n观察：行动的结果\n... (这个思考/行动/行动输入/观察可以重复N次)\n思考：我现在知道最终答案了\n最终答案：对原始输入问题的最终答案\n--\n注意：\n- PythonREPLTool工具的入参是python代码，不允许添加 ```python 或 ```py 等标记\n--\n开始吧！\n问题：{input}"""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nprompt "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" prompt_template"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("format")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    tools"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("tools"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    tool_names"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("tool_names"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("input")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"向/Users/sam/llm/.temp目录下写入一个新文件，名称为：index.html，并写一个企业的官网"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("prompt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nagent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("invoke"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("prompt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("回答结果：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Entering new AgentExecutor chain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n我需要使用Python代码来完成文件的创建和写入操作。\nAction"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Python_REPL\nAction Input"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("open")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/Users/sam/llm/.temp/index.html"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"w"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("file")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("file")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("write"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""\n<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>Our Company - Home</title>\n    <style>\n        body {\n            font-family: Arial, sans-serif;\n            margin: 0;\n            padding: 0;\n            background-color: #f4f4f9;\n        }\n        header {\n            background: #2c3e50;\n            color: #fff;\n            padding: 10px 20px;\n            text-align: center;\n        }\n        nav {\n            background: #34495e;\n            color: white;\n            display: flex;\n            justify-content: center;\n            padding: 10px;\n        }\n        nav a {\n            color: white;\n            margin: 0 15px;\n            text-decoration: none;\n        }\n        section {\n            padding: 20px;\n            text-align: center;\n        }\n        footer {\n            background: #2c3e50;\n            color: white;\n            text-align: center;\n            padding: 10px 0;\n            position: fixed;\n            width: 100%;\n            bottom: 0;\n        }\n    </style>\n</head>\n<body>\n    <header>\n        <h1>Welcome to Our Company</h1>\n    </header>\n    <nav>\n        <a href="#home">Home</a>\n        <a href="#services">Services</a>\n        <a href="#about">About Us</a>\n        <a href="#contact">Contact</a>\n    </nav>\n    <section id="home">\n        <h2>Your Success is Our Mission</h2>\n        <p>We provide cutting-edge solutions tailored to your needs.</p>\n    </section>\n    <footer>\n        &copy; 2023 Our Company. All rights reserved.\n    </footer>\n</body>\n</html>\n    """')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nPython REPL can execute arbitrary code"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" Use "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),t._v(" caution"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\nObservation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \nThought"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("我现在知道最终答案了。\nFinal Answer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 已成功在目录 `"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Users"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("sam"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("llm"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("temp` 下创建了一个名为 `index"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html` 的文件，并写入了一个企业官网的HTML代码。该页面包含一个欢迎标题、导航栏、主页内容以及页脚信息，展示了基本的企业官网结构。\n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Finished chain"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n")])])]),s("h3",{attrs:{id:"langchain-output-parsers库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#langchain-output-parsers库"}},[t._v("#")]),t._v(" LangChain output_parsers库")])])}),[],!1,null,null,null);s.default=r.exports}}]);